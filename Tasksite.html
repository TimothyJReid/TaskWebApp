<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <audio id="reward-sound" src="reward.mp3" preload="auto"></audio>

    <style>
      /* set a background color for the page */
      body {
        background-color: #f2f2f2;
      }

      /* style the table */
      table {
        border-collapse: collapse;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        font-family: Arial, sans-serif;
        font-size: 16px;
      }

      /* style the table header */
      thead th {
        background-color: #4caf50;
        color: white;
        padding: 12px;
        text-align: center;
        border: 1px solid #ddd;
      }

      /* style the table body */
      tbody td {
        padding: 12px;
        text-align: center;
        border: 1px solid #ddd;
      }

      /* style the player position */
      .player-position {
        font-weight: bold;
        color: #ff6600;
      }

      /* style the current points */
      #current-points {
        font-weight: bold;
        color: #4caf50;
      }

      /* style the points buttons */
      td[data-points] {
        background-color: #f2f2f2;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      td[data-points]:hover {
        background-color: #e0e0e0;
      }

      @keyframes gradient-animation {
        0% {
          background-image: linear-gradient(90deg, green, purple);
        }

        50% {
          background-image: linear-gradient(90deg, purple, green);
        }

        100% {
          background-image: linear-gradient(90deg, green, purple);
        }
      }

      .reward-highlighted {
        background-image: linear-gradient(90deg, green, purple);
        animation: gradient-animation 3s linear infinite;
      }

      td[data-points] {
        background-color: #999;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
      }

      tr:nth-child(odd) td[data-points]:nth-child(odd),
      tr:nth-child(even) td[data-points]:nth-child(even) {
        background-color: #333;
      }

      td[data-points]:hover {
        background-color: #777;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }

      tr:nth-child(odd) td[data-points]:nth-child(odd):hover,
      tr:nth-child(even) td[data-points]:nth-child(even):hover {
        background-color: #222;
      }

      .selected {
        background-color: #008cba;
      }

      .selected:hover {
        background-color: #0079a3;
      }
    </style>
  </head>

  <body>
    <table>
      <thead>
        <tr>
          <th>Level</th>
          <th>Level 1</th>
          <th>Level 2</th>
          <th>Level 3</th>
          <th>Level 4</th>
          <th>Level 5</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Player Position</td>
          <td class="player-position">[P]</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Current Points</td>
          <td colspan="5" id="current-points">0</td>
        </tr>
        <tr>
          <td>Points</td>
          <td>[50 points]</td>
          <td>[100 points]</td>
          <td>[200 points]</td>
          <td>[300 points]</td>
          <td>[400 points]</td>
        </tr>
        <tr>
          <td>Task</td>
          <td data-points="15" data-level="1" id="cell-task-1-level-1">
            Apply for 1 job
          </td>
          <td data-points="15" data-level="2" id="cell-task-1-level-2">
            Apply for 1 jobs
          </td>
          <td data-points="30" data-level="3" id="cell-task-1-level-3">
            Apply for 2 jobs
          </td>
          <td data-points="30" data-level="4" id="cell-task-1-level-4">
            Apply for 2 jobs
          </td>
          <td data-points="30" data-level="5" id="cell-task-1-level-5">
            Apply for 3 jobs
          </td>
        </tr>
        <tr>
          <td>Task</td>
          <td data-points="15" data-level="1" id="cell-task-2-level-1">
            Work on app 1h
          </td>
          <td data-points="15" data-level="2" id="cell-task-2-level-2">
            Work on app 1h
          </td>
          <td data-points="30" data-level="3" id="cell-task-2-level-3">
            Work on app 2h
          </td>
          <td data-points="30" data-level="4" id="cell-task-2-level-4">
            Work on app 2h
          </td>
          <td data-points="30" data-level="5" id="cell-task-2-level-5">
            Work on app 3h
          </td>
        </tr>
        <tr>
          <td>Task</td>
          <td data-points="10" data-level="1" id="cell-task-3-level-1">
            Exercise daily 30 minutes
          </td>
          <td data-points="10" data-level="2" id="cell-task-3-level-2">
            Exercise daily 30 minutes
          </td>
          <td data-points="20" data-level="3" id="cell-task-3-level-3">
            Exercise daily 45 minutes
          </td>
          <td data-points="20" data-level="4" id="cell-task-3-level-4">
            Exercise daily 45 minutes
          </td>
          <td data-points="20" data-level="5" id="cell-task-3-level-5">
            Exercise daily <br />
            1 hour
          </td>
        </tr>
        <tr>
          <td>Task</td>
          <td data-points="10" data-level="1" id="cell-task-4-level-1">
            Improve mind, body, or soul
          </td>
          <td data-points="10" data-level="2" id="cell-task-4-level-2">
            Improve mind, body, or soul
          </td>
          <td data-points="20" data-level="3" id="cell-task-4-level-3">
            Improve mind, body, or soul
          </td>
          <td data-points="20" data-level="4" id="cell-task-4-level-4">
            Improve mind, body, or soul
          </td>
          <td data-points="20" data-level="5" id="cell-task-4-level-5">
            Improve mind, body, or soul
          </td>
        </tr>
        <tr>
          <td>Reward</td>
          <td id="cell-reward-level-1" data-level="1">Movie night</td>
          <td id="cell-reward-level-2" data-level="2">Favorite snack</td>
          <td id="cell-reward-level-3" data-level="3">New book</td>
          <td id="cell-reward-level-4" data-level="4">Special dinner</td>
          <td id="cell-reward-level-5" data-level="5">Weekend trip</td>
        </tr>
      </tbody>
    </table>
  </body>

  <script>
    function updatePlayerPosition(currentPoints) {
      const playerPositionCells = document.querySelectorAll(".player-position");
      playerPositionCells.forEach((cell) => (cell.textContent = ""));

      let level = 1;
      if (currentPoints >= 50 && currentPoints < 100) {
        level = 2;
      } else if (currentPoints >= 100 && currentPoints < 200) {
        level = 3;
      } else if (currentPoints >= 200 && currentPoints < 300) {
        level = 4;
      } else if (currentPoints >= 300) {
        level = 5;
      }

      const targetCell = document.querySelector(
        `tbody tr:nth-child(1) td:nth-child(${level + 1})`
      );
      targetCell.textContent = "[P]";
      targetCell.classList.add("player-position");
    }

    function toggleTask(e) {
      const cell = e.target;
      if (cell.tagName === "TD" && cell.hasAttribute("data-points")) {
        const points = parseInt(cell.getAttribute("data-points"));
        const level = parseInt(cell.getAttribute("data-level"));
        const currentPointsElement = document.getElementById("current-points");
        const currentPoints = parseInt(currentPointsElement.innerText);

        if (cell.classList.contains("selected")) {
          cell.classList.remove("selected");
          currentPointsElement.innerText = currentPoints - points;
          cell.style.backgroundColor = "";
        } else {
          cell.classList.add("selected");
          currentPointsElement.innerText = currentPoints + points;
          cell.style.backgroundColor = "green";
        }

        updateTaskAndRewardColors(currentPointsElement.innerText);
        updatePlayerPosition(parseInt(currentPointsElement.innerText));
      }
    }

    function updateTaskAndRewardColors(currentPoints) {
      const rewardCells = document.querySelectorAll("[data-level]");
      const rewardSound = document.getElementById("reward-sound");
      const requiredPointsArray = [50, 100, 200, 300, 400];

      for (let i = 0; i < rewardCells.length; i++) {
        const cell = rewardCells[i];
        const level = parseInt(cell.getAttribute("data-level"));
        const requiredPoints = requiredPointsArray[level - 1];

        if (currentPoints >= requiredPoints) {
          if (cell.id.includes("reward")) {
            if (!cell.classList.contains("reward-highlighted")) {
              rewardSound.currentTime = 0;
              rewardSound.play();
              cell.classList.add("reward-highlighted");
            }
          } else {
            cell.style.backgroundColor = "blue";
          }
        } else {
          if (cell.id.includes("reward")) {
            cell.classList.remove("reward-highlighted");
          } else if (!cell.classList.contains("selected")) {
            cell.style.backgroundColor = "";
          }
        }
      }
    }

    document.querySelector("table").addEventListener("click", toggleTask);
  </script>
</html>
